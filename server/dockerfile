# Base image với JDK 17, có thể đổi sang 21 nếu cần
FROM eclipse-temurin:17-jdk

# Tạo thư mục để chứa app
WORKDIR /app

# Copy toàn bộ project vào container
COPY . .

# Cấp quyền thực thi cho mvnw (nếu bạn dùng mvnw)
RUN chmod +x mvnw

# Build ứng dụng, bỏ qua test để build nhanh hơn
RUN ./mvnw clean package -DskipTests

# Chạy ứng dụng jar (Render tự động publish port 8080)
CMD ["java", "-jar", "$(find target -name '*.jar' | head -n 1)"]
